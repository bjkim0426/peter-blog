{% include "header.html" %}

<!-- Page Header -->
<header class="masthead" style="background-image: url({{ url_for('static', filename='img/about-bg.jpg')}})">
    <div class="overlay"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                <div class="page-heading">
                    <h1>Password Manager</h1>
                    <span class="subheading">Generate, save, and search passwords</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Main Content for Password Manager -->
<div class="container">
    <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
            <!-- Password Manager Section -->
            <div id="app">
                <!-- User Inputs for Password Manager -->
                <div>
                    <label for="website">Website:</label>
                    <input id="website" type="text">
                </div>
                <div>
                    <label for="email">Email/Username:</label>
                    <input id="email" type="text">
                </div>
                <div>
                    <label for="password">Password:</label>
                    <input id="password" type="text">
                </div>
                <button id="generate">Generate Password</button>
                <button id="save">Save Password</button>
                <button id="search">Search</button>
            </div>

            <p id="password-output"></p> <!-- Optional: Display the password result here -->
        </div>
    </div>
</div>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pyscript@0.1.0/dist/pyscript.js"></script>

<!-- PyScript and JavaScript for password generation, saving, and searching -->
<script type="text/javascript">
    // JavaScript code to handle button clicks
    const generatePasswordButton = document.getElementById('generate');
    const savePasswordButton = document.getElementById('save');
    const searchButton = document.getElementById('search');

    generatePasswordButton.addEventListener('click', function () {
        pyscript.runPython(`
            import random

            def generate_password():
                letters = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'
                numbers = '0123456789'
                symbols = '!#$%&()*+'

                nr_letters = random.randint(8, 10)
                nr_symbols = random.randint(2, 4)
                nr_numbers = random.randint(2, 4)

                password = ''.join(random.choice(letters) for _ in range(nr_letters)) + \
                          ''.join(random.choice(symbols) for _ in range(nr_symbols)) + \
                          ''.join(random.choice(numbers) for _ in range(nr_numbers))

                password = ''.join(random.sample(password, len(password)))  # Shuffle the password
                return password

            password = generate_password()
            document.getElementById('password').value = password
        `);
    });

    savePasswordButton.addEventListener('click', function () {
        const website = document.getElementById('website').value;
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        if (website && password) {
            let data = JSON.parse(localStorage.getItem('passwords')) || {};
            data[website] = { email, password };
            localStorage.setItem('passwords', JSON.stringify(data));
            alert("Password saved successfully!");
        } else {
            alert("Please fill out all fields.");
        }
    });

    searchButton.addEventListener('click', function () {
        const website = document.getElementById('website').value;

        let data = JSON.parse(localStorage.getItem('passwords')) || {};
        if (data[website]) {
            alert(`Email: ${data[website].email}\nPassword: ${data[website].password}`);
        } else {
            alert("No saved password found for this website.");
        }
    });
</script>

<style>
    .about-container {
        display: flex;
        align-items: center;
        margin: 20px 0;
    }

    .about-image img {
        width: 300px; /* Adjust the size of the image */
        height: auto;
        border-radius: 0%; /* Remove the circle border */
        margin-right: 20px; /* Space between image and text */
    }

    .about-text {
        flex-grow: 1;
    }

    .first-paragraph {
        font-size: 16px;
        line-height: 1.5;
        font-style: italic; /* Italicize the first paragraph */
    }

    #app {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }

    label {
        font-weight: bold;
    }

    input {
        padding: 5px;
        width: 300px;
        font-size: 16px;
    }

    button {
        padding: 10px;
        font-size: 16px;
        cursor: pointer;
        width: 200px;
        margin-top: 10px;
    }
</style>

{% include "footer.html" %}
